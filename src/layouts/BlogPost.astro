---
import type { CollectionEntry } from "astro:content";
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import FormattedDate from "../components/FormattedDate.astro";
import { Image } from "astro:assets";
import Content from "@/components/Content.astro";

type Props = CollectionEntry<"blog">["data"];

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<html lang="en">
    <head>
        <BaseHead title={title} description={description} />
    </head>

    <body>
        <Header />
        <style is:global>
            @reference "../app.css";
            main article.markdown-body {
                ul {
                    @apply list-disc list-inside pl-4 mb-4;
                }
                h1,
                h2,
                h3,
                h4,
                h5 {
                    @apply font-bold font-mplus;
                }
                h1 {
                    @apply text-4xl;
                }
                h2 {
                    @apply text-2xl;
                }
                h3 {
                    @apply text-xl;
                }
                h4 {
                    @apply text-lg;
                }
                img {
                    @apply border border-slate-300 dark:border-zinc-700 rounded-xl mb-6;
                }
                p {
                    @apply mb-6;
                }
                a {
                    @apply underline underline-offset-2 hover:text-orange-500 decoration-orange-500;
                }
            }
        </style>

        <main class="pt-[56px]">
            <Content className="pt-6 markdown-body">
                <div class="mb-8">
                    {
                        heroImage && (
                            <Image
                                class="border border-slate-300 dark:border-zinc-700 rounded-xl"
                                width={1020}
                                height={510}
                                src={heroImage}
                                alt=""
                            />
                        )
                    }
                </div>
                <div class="date">
                    <FormattedDate date={pubDate} />
                    {
                        updatedDate && (
                            <div>
                                Last updated on{" "}
                                <FormattedDate date={updatedDate} />
                            </div>
                        )
                    }
                </div>
                <h1 class="text-3xl my-1 font-mplus">{title}</h1>
                <hr class="border-top border-zinc-400 my-4" />
                <slot />
            </Content>
        </main>
        <Footer />
    </body>
</html>
